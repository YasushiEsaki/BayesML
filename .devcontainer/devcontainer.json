// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:
// https://github.com/microsoft/vscode-dev-containers/tree/v0.241.1/containers/docker-existing-dockerfile
{
    "name": "bayesml-dev",
    // Sets the run context to one level up instead of the .devcontainer folder.
    "context": "../../",
    // Update the 'dockerFile' property if you aren't using the standard 'Dockerfile' filename.
    "dockerFile": "../docker/Dockerfile",
    "build": {
        "args": {
            "USER": "esaki"
        }
    },
    "settings": {
        "terminal.integrated.profiles.linux": {
            "bash": {
                "path": "/bin/bash"
            }
        },
        "terminal.integrated.defaultProfile.linux": "bash",
        "python.languageServer": "Default",
        "python.defaultInterpreterPath": "/bin/python3",
        "python.linting.enabled": true,
        "python.linting.pylintEnabled": false,
        "python.linting.flake8Enabled": true,
        "python.linting.flake8Args": [
            "--max-line-length",
            "119"
        ],
        "python.linting.lintOnSave": true,
        "python.formatting.provider": "yapf",
        "python.formatting.yapfArgs": [
            "--style={column_limit: 119}"
        ],
        "editor.formatOnSave": true
    },
    "extensions": [
        "MS-CEINTL.vscode-language-pack-ja",
        "ms-dotnettools.vscode-dotnet-runtime",
        "ms-vscode.cpptools",
        "ms-vscode.cpptools-extension-pack",
        "ms-vscode.cpptools-themes",
        "jeff-hykin.better-cpp-syntax",
        "twxs.cmake",
        "josetr.cmake-language-support-vscode",
        "ms-vscode.cmake-tools",
        "ms-azuretools.vscode-docker",
        "ms-python.python",
        "ms-python.vscode-pylance",
        "cschlosser.doxdocgen",
        "GrapeCity.gc-excelviewer",
        "donjayamanne.githistory",
        "ms-toolsai.jupyter",
        "ms-toolsai.jupyter-keymap",
        "ms-toolsai.jupyter-renderers",
        "yzhang.markdown-all-in-one",
        "DavidAnson.vscode-markdownlint"
    ],
    "shutdownAction": "none",
    // Use 'forwardPorts' to make a list of ports inside the container available locally.
    // "forwardPorts": [],
    // Uncomment the next line to run commands after the container is created - for example installing curl.
    // "postCreateCommand": "apt-get update && apt-get install -y curl",
    // Uncomment when using a ptrace-based debugger like C++, Go, and Rust
    "runArgs": [
        "--name",
        "bayesml-dev",
        "--shm-size",
        "8gb",
        "-e",
        "TZ=Asia/Tokyo"
    ],
    // Uncomment to use the Docker CLI from inside the container. See https://aka.ms/vscode-remote/samples/docker-from-docker.
    "workspaceMount": "source=/home/${localEnv:USER}/BayesML,target=/home/esaki/BayesML,type=bind",
    "workspaceFolder": "/home/esaki/BayesML"
    // Uncomment to connect as a non-root user if you've added one. See https://aka.ms/vscode-remote/containers/non-root.
    //"remoteUser": "vscode"
}